{% extends "base.html" %}

{% block title %}Teams - Esports Management{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="bi bi-people-fill"></i> All Teams</h2>
    {% if session.user_id %}
    <a href="{{ url_for('create_team') }}" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Create New Team
    </a>
    {% endif %}
</div>

{% if teams %}
<div class="card shadow">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>Team Name</th>
                        <th>Captain</th>
                        <th>Tournaments</th>
                        <th>Matches</th>
                        <th>Wins</th>
                        <th>Losses</th>
                        <th>Avg Score</th>
                        <th>Win Rate</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for team in teams %}
                    <tr>
                        <td>
                            <strong>{{ team.team_name }}</strong>
                        </td>
                        <td>{{ team.captain_name }}</td>
                        <td>
                            <span class="badge bg-primary">{{ team.tournaments_participated }}</span>
                        </td>
                        <td>{{ team.total_matches }}</td>
                        <td>
                            <span class="badge bg-success">{{ team.total_wins }}</span>
                        </td>
                        <td>
                            <span class="badge bg-danger">{{ team.total_losses }}</span>
                        </td>
                        <td>{{ team.avg_score_all_time }}</td>
                        <td>
                            {% if team.overall_win_rate %}
                            <div class="progress" style="min-width: 80px;">
                                <div class="progress-bar bg-info" role="progressbar" 
                                     style="width: {{ team.overall_win_rate }}%"
                                     aria-valuenow="{{ team.overall_win_rate }}" 
                                     aria-valuemin="0" aria-valuemax="100">
                                    {{ team.overall_win_rate }}%
                                </div>
                            </div>
                            {% else %}
                            <span class="text-muted">N/A</span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{{ url_for('team_details', team_id=team.team_id) }}" 
                               class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-eye"></i> View
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% else %}
<div class="alert alert-info text-center">
    <h4><i class="bi bi-info-circle"></i> No teams found</h4>
    <p>Be the first to create a team!</p>
    {% if session.user_id %}
    <a href="{{ url_for('create_team') }}" class="btn btn-primary">Create Team</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
